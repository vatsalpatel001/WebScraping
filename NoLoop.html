<!DOCTYPE html>
<html>
<head>
	<title></title>
  <script type="text/javascript" src= "./SymbolCode.js"> </script>
</head>
<body>
<table >
  <tbody id="demo"></tbody>
</table>
<table >
  <tbody id="demo1"></tbody>
</table>
<script type="text/javascript">

  console.log(Symbol)
  let count=0;


var i = 0;                  //  set your counter to 1
myLoop(); 
function myLoop() {         //  create a loop function
  setTimeout(function() {   //  call a 3s setTimeout when the loop is called
    console.log('hello'); 




  let xmlhttp = new XMLHttpRequest();


 
xmlhttp.open(
  "GET",
  "https://ewmw.edelweiss.in/api/Market/Process/EquityDetailsMarket/"+Code[Symbol.indexOf(NSESymbol[i])],
  // "https://ewmw.edelweiss.in/api/Market/Process/EquityDetails/"+1375,
  true
);

if(xmlhttp){xmlhttp.send(); }


xmlhttp.onreadystatechange = function () {
  if (this.readyState == 4 && this.status == 200) {
    // let data = JSON.parse(this.responseText).feed.entry;
    // let data = this.responseText;
    // let data =JSON.parse(JSON.stringify(JSON.parse(this.responseText)).replace(/(?:\\[rn])+/g, ""));
    let data =JSON.parse(JSON.parse(this.responseText));
if(data){
  console.log(data)
  count++;
  console.log(count)
  if(data.JsonData.companyMarketPrice[0].HighDay==data.JsonData.companyMarketPrice[0].LTP && data.JsonData.companyMarketPrice[0].LTP>100 && data.JsonData.companyMarketPrice[0].Volume >100000){
      document.getElementById("demo").innerHTML +=""+data.JsonData.Symbol+" "+data.JsonData.companyMarketPrice[0].Volume+" ,<br>";
  }
  else{
      // document.getElementById("demo1").innerHTML +="'"+data.JsonData.Symbol+"' ,";

  }

}
else{
  return;
}
   

  }
};

      //  your code here
    i++;                    //  increment the counter
    if (i < NSESymbol.length) {           //  if the counter < 10, call the loop function
      myLoop();             //  ..  again which will trigger another 
    }                       //  ..  setTimeout()
  }, 10)

    }




</script>
</body>
</html>